<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
      
        Blog - Wagon
      
    </title>

    <meta charset="utf-8">
    <meta name="description" content="Wagon's engineering, product, and news blog.">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:site_name" content="Wagon" />
    <meta property="og:url" content="http://www.wagonhq.com/blog/index.html" />
    <meta property="og:title" content="Blog" />
    <meta property="og:description" content="Wagon's engineering, product, and news blog." />
    <meta property="og:image" content="http://pbs.twimg.com/profile_images/492796946797441024/bP0E4671.png" />

    <link href="/images/favicon.png" rel="icon" type="image/png">
    <link href="/css/bootstrap-3.3.2.min.css" rel="stylesheet">
    <link href="/css/font-awesome-4.1.0.min.css" rel="stylesheet">
    <link href="/css/pygments.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,Open+Sans" rel="stylesheet">
    <link href="/css/wagon.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick-theme.css"/>

    <link type="application/atom+xml" rel="alternate" href="http://www.wagonhq.com/blog/feed.xml" title="Wagon Blog" />

    

    <script src="/js/jquery-2.1.1.min.js"></script>
    <script src="/js/bootstrap-3.3.2.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-53305403-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#wagon-navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a href="/" >
            <span class="navbar-brand">
              <span class="navbar-logo"></span>
            </span>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="wagon-navbar-collapse">
          <ul class="nav navbar-nav navbar-right topnav">
            <li><a href="/blog">Blog</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="release-notes">
  <div class="container">
    <div class="col-md-8 center-col">
     
     
      <section class="post">
        <div class="row">
          <h2 class="post-header">
            <a href=/blog/wagon-joins-box>Wagon Joins Box</a><br>
            <small>
              <span class="share">
                <a href="https://twitter.com/intent/tweet?url=http://www.wagonhq.com/blog/wagon-joins-box&text=Wagon Joins Box%20from%20@WagonHQ:" target="_blank">
                  <i class="fa fa-lg fa-twitter"></i>
                </a>
                <a onClick="window.open('http://www.facebook.com/sharer/sharer.php?u=http://www.wagonhq.com/blog/wagon-joins-box/&t=Wagon Joins Box%20from%20Wagon', 'facebook_share', 'height=320, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');">
                  <i class="fa fa-6 fa-facebook"></i>
                </a>
              </span>
              August 31, 2016 | <a href="http://www.wagonhq.com/about" target="_blank">Team Wagon</a>
            </small>
          </h2>
          
<div class="tags">
  
</div>


          <p>We’re excited to share that the Wagon team will be joining the <a href="https://www.box.com/home">Box</a> family! We are thrilled to bring our data analytics and insights expertise to the Box enterprise platform.</p>

<div class="text-center">
  <p class="text-right" style="">
    <img src="/images/box-wagon.png" style="
      width: 100%;
      margin-bottom: 20px;
      margin-top: 10px;
    " />
      <br />
    <code style="font-size: smaller; font-style: italic; color: #888; position: relative; top: -12px" class="text-right">INSERT INTO "Box" VALUES ('Wagon');</code>
  </p>
</div>

<p>Wagon and Box believe that shared knowledge empowers individuals and unites teams. Box helps enterprises do more with their content and get their work done faster by acting as the central, modern content platform. Fortune 500 companies across every industry trust Box to sit at the center of their businesses. We’re excited to build data analytics products at Box to help people understand their data and work better, together.</p>

<p>Our team will be focused on building new products at Box, so we’ll be shutting down the current Wagon product on October 3rd, 2016. Please read our <a href="/faq">transition FAQ</a> for details.</p>

<p>We started Wagon over two years ago to help teams collaborate on data analysis. Tens of thousands of SQL savvy people use Wagon to understand their data. We’re proud of what we’ve accomplished and are ready to continue building at Box.</p>

<p>We’re humbled by the support from our users, partners, investors, advisors, friends (#bandwagon), and family.  Thank you for your feedback, bug reports, demands, and kind words.</p>

<p>Please read Box CEO Aaron Levie’s <a href="http://blog.box.com/blog/wagon-box">blog post</a>.</p>

<p style="float: right;">
We'll be rooting you all on. <i>Gogogo!</i><br />
&mdash; <a href="/about">Team Wagon</a>
</p>

        </div>
      </section>
     
     
     
      <section class="post">
        <div class="row">
          <h2 class="post-header">
            <a href=/blog/customer-data-together>Your customer data, together at last</a><br>
            <small>
              <span class="share">
                <a href="https://twitter.com/intent/tweet?url=http://www.wagonhq.com/blog/customer-data-together&text=Your customer data, together at last%20from%20@WagonHQ:" target="_blank">
                  <i class="fa fa-lg fa-twitter"></i>
                </a>
                <a onClick="window.open('http://www.facebook.com/sharer/sharer.php?u=http://www.wagonhq.com/blog/customer-data-together/&t=Your customer data, together at last%20from%20Wagon', 'facebook_share', 'height=320, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');">
                  <i class="fa fa-6 fa-facebook"></i>
                </a>
              </span>
              April 06, 2016 | <a href="http://twitter.com/agrano" target="_blank">Andy Granowitz</a>
            </small>
          </h2>
          
<div class="tags">
  
  <a href="/blog/sql">#sql</a>
  
</div>


          <p>Customers interact with your company through many paths — they engage inside your product, open emails, view ads, answer surveys, etc. To understand your customers, you have to combine product engagement with their other interactions.</p>

<p>Unfortunately, it’s difficult to analyze customer data across these different experiences.  Customer behavior in your product is usually measured through a 3rd party tracking service or by analyzing raw application logs.  Other interactions, like as customer support chats or sales calls, are stored in SaaS apps or homegrown internal tools.  You can only access this data through each of their limited reporting UIs, exports, or possibly an API.  There’s no magic wand for joining these disparate streams.</p>

<p>There are two common approaches to join these multiple datasets: (1) send all data to one tracking service or (2) move the data to a common place. Sending all the data to a single tracking service, like Google Analytics or Mixpanel, is cumbersome, nearly impossible to implement, and inflexible to query. Dead end.</p>

<p>The better approach is to move all customer data into a common store. Amazon Redshift, Google BigQuery, and Azure SQL Warehouse are our favorite cloud data stores for large scale analytics. They’re fast, easy to manage, and decreasing in price. But moving data from 3rd party sources to these cloud databases is still hard. You have to work with multiple APIs, find join keys, schedule data pulls, handle backfill, etc… It’s a huge headache.</p>

<p>There are two strategies: build or buy. Building your own is complicated - we have a <a href="/blog/building-an-analytics-pipeline">post</a> about it!</p>

<p style="max-width: 600px; margin: auto;">
	<img src="/images/partners/segment-sources.png" />
</p>

<p><br /></p>

<h2 class="text-center" style="font-size: 45px; margin-bottom: 0px;">
  <a href="/partners/segment" class="no-underline">
    <img src="/images/wagon.png" id="wagon-partner-logo" />
      &nbsp;&nbsp;💖&nbsp;&nbsp;
    <span>
      <img src="/images/partners/segment-logo.svg" id="segment-logo" />
    </span>
  </a>
</h2>
<p><br /></p>

<p>Today, thanks to <a href="https://segment.com/sources/?utm_medium=blog&amp;utm_source=wagon&amp;utm_campaign=sources">Segment Sources</a>, bringing all of your customer touch points together got easier. They’ve made it easy to pull customer data from many sources, such as Salesforce, Zendesk, and behavioral data from your app or website, into a single warehouse.  We worked with Segment to write some <a href="/partners/segment/queries">starter queries</a> - give them a go. If you’re already using Wagon and connect a Segment Warehouse, you can open these queries right in the app.</p>

<p>Segment will be expanding its Source catalog in the coming months, and you can always check out the current <a href="https://segment.com/catalog/?utm_medium=blog&amp;utm_source=wagon&amp;utm_campaign=sources">catalog</a> to see the latest additions. We’re excited to partner with Segment on our shared mission to make answering questions with data easy.</p>

<p>We also recommend other tools to help unify your various customer data sets: <a href="https://fivetran.com/">Fivetran</a>, <a href="https://rjmetrics.com/product/pipeline">RJ Metrics Pipeline</a>, and <a href="http://snowplowanalytics.com/">Snowplow</a> – so that you’ll always have access to the data you need in Wagon, no matter how you choose to set up your pipeline.</p>

<p>Modern ETL + modern SQL tools = win!</p>

<script src="/js/public-query.js"></script>

<script src="/js/protocol-url.js"></script>


        </div>
      </section>
     
     
     
      <section class="post">
        <div class="row">
          <h2 class="post-header">
            <a href=/blog/deploying-electron>Deploying Electron</a><br>
            <small>
              <span class="share">
                <a href="https://twitter.com/intent/tweet?url=http://www.wagonhq.com/blog/deploying-electron&text=Deploying Electron%20from%20@WagonHQ:" target="_blank">
                  <i class="fa fa-lg fa-twitter"></i>
                </a>
                <a onClick="window.open('http://www.facebook.com/sharer/sharer.php?u=http://www.wagonhq.com/blog/deploying-electron/&t=Deploying Electron%20from%20Wagon', 'facebook_share', 'height=320, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');">
                  <i class="fa fa-6 fa-facebook"></i>
                </a>
              </span>
              February 23, 2016 | <a href="http://twitter.com/deland" target="_blank">Matt DeLand</a>
            </small>
          </h2>
          
<div class="tags">
  
  <a href="/blog/electron">#electron</a>
  
  <a href="/blog/engineering">#engineering</a>
  
</div>


          <p><a href="http://electron.atom.io/">Electron</a> makes it easy to write cross-platform desktop apps using web technology— but how do you build and deploy these hybrid apps in production?</p>

<p>At January’s <a href="http://www.meetup.com/Bay-Area-Electron-User-Group/events/228010482/">Bay Area Electron Meetup</a>, we presented how Wagon builds and delivers new updates to our users. This talk covers both standard and custom Electron usage for background updating, uninterrupted usage, helper processes, cross-platform builds, OS notifications, and the occasional hotfix.</p>

<script async="" class="speakerdeck-embed" data-id="1b22323b1ac34371a4d75a5813c17f86" data-ratio="1.29456384323641" src="//speakerdeck.com/assets/embed.js"></script>

<hr />

<p>Thanks to <a href="https://twitter.com/bengotow">Ben Gotow</a> at Nylas for organizing!</p>

        </div>
      </section>
     
     
     
     
     
     
     
     
     
     
     
      <section class="post">
        <div class="row">
          <h2 class="post-header">
            <a href=/blog/haskell-for-industry>Haskell for commercial software development</a><br>
            <small>
              <span class="share">
                <a href="https://twitter.com/intent/tweet?url=http://www.wagonhq.com/blog/haskell-for-industry&text=Haskell for commercial software development%20from%20@WagonHQ:" target="_blank">
                  <i class="fa fa-lg fa-twitter"></i>
                </a>
                <a onClick="window.open('http://www.facebook.com/sharer/sharer.php?u=http://www.wagonhq.com/blog/haskell-for-industry/&t=Haskell for commercial software development%20from%20Wagon', 'facebook_share', 'height=320, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');">
                  <i class="fa fa-6 fa-facebook"></i>
                </a>
              </span>
              February 02, 2016 | <a href="http://twitter.com/mkscrg" target="_blank">Mike Craig</a>
            </small>
          </h2>
          
<div class="tags">
  
  <a href="/blog/haskell">#haskell</a>
  
  <a href="/blog/engineering">#engineering</a>
  
</div>


          <p>Inquiring minds on Quora want to know, <em><a href="https://www.quora.com/Is-Haskell-suitable-for-commercial-software-development">is Haskell suitable for commercial software development?</a></em></p>

<blockquote>
  <p>I’m looking for an alternative to Python mainly for reasons of Python having so much trouble with
workable concurrency, and Go seemed great at first look (it’s still not bad, but indeed error
handling and lack of generics are a few features cut away too far).</p>

  <p>This pretty much leaves Haskell as workable alternative. But is it really a practical alternative?</p>

  <p>My biggest fear that while Haskell seems very powerful, it is also difficult and so it may be too
difficult for person A to read code written by person B (what seems to have killed Lisp in my view
is that problem and person-specific DSLs written in Lisp were simply unreadable for too many other
people).</p>

  <p>PS, in other words: I do not ask about strong sides of Haskell (or language X), those are well
known, but rather about a lack of show-stoppers.</p>
</blockquote>

<p>Absolutely, yes! At Wagon, we’ve built server- and client-side systems in Haskell, running in AWS and distributed to our users in a cross-platform desktop app.</p>

<p style="max-width: 600px; margin: auto;">
  <img src="/images/posts/quora.png" alt="Wagon on Quora" />
</p>

<p>Possible show-stoppers to using Haskell commercially:</p>

<p><strong>Community support</strong><br /> A good open-source community is a big deal. It’s the difference between fixing other people’s code and finding an open GitHub issue with a workaround and an in-progress fix. With Haskell, we find the latter much more frequently than the former. The community is positive, active, and generally helpful when problems come up. Lively discussion takes place on <a href="https://www.reddit.com/r/haskell/">Reddit</a>, <a href="https://wiki.haskell.org/IRC_channel">IRC</a>, a <a href="http://fpchat.com/">public Slack channel</a>, and several <a href="https://wiki.haskell.org/Mailing_lists">mailing lists</a>.</p>

<p><strong>Hiring</strong><br /> There are many factors involved in hiring: team size, location, remove vs on-site, other expertise required, etc. At Wagon we’re an on-site team of ~10 in San Francisco, with lots of web- and database-related problems to work on. Finding qualified Haskellers has not been an issue.</p>

<p>Haskell is different from the languages lots of developers are used to. ML-style syntax, strong types, and lazy evaluation make for a steep initial learning curve. Anecdotally, we’ve found Haskell’s secondary learning curve smooth and productive. Intermediate Haskellers quickly pick up advanced concepts on the job: parsers, monad transformers, higher-order types, profiling and optimization, etc.</p>

<p><strong>Available industrial-strength libraries</strong><br /> Haskell lends itself to lightweight-but-powerful libraries that do one thing very well. We get a lot done by composing these small libraries rather than relying on big feature-complete frameworks. Some libraries have become de-facto standards that are stable and performant, and <a href="http://www.stackage.org/">Stackage</a> gives us a reliable way to find additional packages that usually “just work”.</p>

<p>We do sometimes find gaps in Haskell’s available libraries. For example, Haskell can’t yet match Python’s <a href="http://pandas.pydata.org/">tools for numerical computing</a>. And like every open-source ecosystem, there is some bad code out there. We rely on community recommendations and a sense of dependency hygiene to stay productive.</p>

<p><strong>Performance</strong><br /> A quick Google search turns up benchmarks comparing Haskell to anything else you can imagine. In practice, we’re interested in tools with two properties:</p>

<ol>
  <li>Fast enough under most circumstances. “Fast enough” means performance is never an issue for a given piece of code.</li>
  <li>Easy to optimize when needed. When we do need more speed, we’d like to get it incrementally rather than immediately rewrite that code in C.</li>
</ol>

<p>Haskell has both of these properties. We almost never have to address performance in our Haskell code. When we do, we turn to GHC’s profiler and its many performance knobs: optimization flags, inlining, strictness and memory layout controls, etc. Haskell also has good interopability with C for when that’s appropriate.</p>

<p><strong>Memory leaks</strong><br /> There’s a lot of talk about memory leaks caused by Haskell’s lazy evaluation model. We run into this very infrequently in practice, and in those rare situations GHC’s profiler has led us to solutions quickly. The real problem is not lazy evaluation but <a href="http://dev.stephendiehl.com/hask/#lazy-io">lazy IO</a>, which we avoid with tools like <a href="http://www.stackage.org/package/conduit">conduit</a> and <a href="http://www.stackage.org/package/pipes">pipes</a>.</p>

<p><strong>Debuggability</strong><br /> Haskell doesn’t have a debugger in the same sense as Python or Java. This is mostly a non-issue, because exceptions are rare and GHCi gives us a flexible way to run code interactively. Nonetheless, hunting down problems in a big application can be difficult. This has improved in recent versions of GHC with support for proper <a href="https://downloads.haskell.org/~ghc/latest/docs/html/libraries/base-4.8.2.0/GHC-Stack.html">stack traces</a>.</p>

<p><strong>Haskellers reading other Haskellers’ code</strong><br /> This hasn’t been a problem for us. Haskell is a flexible language both in syntax and semantics, but this leads to better solutions more than it leads to opaque or unreadable code. Heavy indirection—via embedded DSLs or deep typeclass hierarchies—is unusual in practice. We reach for those tools as a last resort, knowing that they come with a serious maintenance cost. Agreeing on a basic <a href="https://github.com/tibbe/haskell-style-guide/blob/master/haskell-style.md">style guide</a> helps smooth out minor syntax differences.</p>

<p>Read our other <a href="https://www.wagonhq.com/blog/haskell">Haskell engineering blog posts</a>, come to our community events, or better yet, <a href="https://www.wagonhq.com/jobs">join our team</a>!</p>

        </div>
      </section>
     
     
     
     
     
      <section class="post">
        <div class="row">
          <h2 class="post-header">
            <a href=/blog/Redshift-UDFs-in-Python>Python UDFs in Amazon Redshift</a><br>
            <small>
              <span class="share">
                <a href="https://twitter.com/intent/tweet?url=http://www.wagonhq.com/blog/Redshift-UDFs-in-Python&text=Python UDFs in Amazon Redshift%20from%20@WagonHQ:" target="_blank">
                  <i class="fa fa-lg fa-twitter"></i>
                </a>
                <a onClick="window.open('http://www.facebook.com/sharer/sharer.php?u=http://www.wagonhq.com/blog/Redshift-UDFs-in-Python/&t=Python UDFs in Amazon Redshift%20from%20Wagon', 'facebook_share', 'height=320, width=640, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');">
                  <i class="fa fa-6 fa-facebook"></i>
                </a>
              </span>
              February 01, 2016 | <a href="https://twitter.com/elisebreda" target="_blank">Elise Breda (Yhat)</a>
            </small>
          </h2>
          
<div class="tags">
  
  <a href="/blog/sql">#sql</a>
  
</div>


          <p><em><a href="https://twitter.com/elisebreda">Elise Breda</a> is the Growth Strategist at <a href="https://www.yhat.com/">Yhat</a>, a tech company that builds software for deploying predictive analytics to mobile and web apps. When she isn’t at their awesome new office in DUMBO, she can be found exploring the bike paths and Thai restaurants of NYC.</em></p>

<h3 id="in-the-beginning">In the Beginning…</h3>

<p>In the early 2000’s, the behemoth collection of cloud computing services we now know as <a href="http://aws.amazon.com/">Amazon Web Services</a> (AWS) was little more than sparks firing in <a href="https://twitter.com/ccpinkham">Chris Pinkham</a> and <a href="https://twitter.com/b6n">Benjamin Black</a>’s neurons. In 2003, the two presented a paper (<a href="http://blog.b3k.us/2009/01/25/ec2-origins.html">blog post here</a>) outlining a radical vision for a retail computing infrastructure that would be standardized, automated and built upon web services. The next year, <a href="https://en.wikipedia.org/wiki/Amazon_Simple_Queue_Service">Simple Queue Service</a>, the first AWS service for public usage, was launched.</p>

<p>Fast forward almost a decade, and AWS is now the most commonly used cloud platform among enterprise software developers. AWS products span the gamut of web services, from computation (eg EC2) to networking (eg VPC) and content delivery (eg S3). In this post we’ll explore a small fraction of a fraction of the AWS ecosystem–a database that’s generating all kinds of groundswell right now: <a href="https://en.wikipedia.org/wiki/Amazon_Redshift">Amazon Redshift</a>.</p>

<p>The rest of this post will talk about Redshift at a high level and then dive into a mini overview of <a href="https://en.wikipedia.org/wiki/User-defined_function">User Defined Functions</a> (UDFs), how they work, why they’re great, and how to start using them.</p>

<h3 id="amazon-redshift">Amazon Redshift</h3>

<p><a href="https://aws.amazon.com/redshift/">Amazon Redshift</a> is a hosted data warehouse that’s accessible / easy to set up, and built for speed and suitable for a variety of combining, storing, and compute-heavy analytics tasks.</p>

<p>Two things make Redshift particularly attractive. First, Redshift can handle insane amounts of data–it is a petabyte-scale warehouse. A petabyte is a <em>lot</em> (10<sup>15</sup> bytes) of data. As a point of reference, the entire master catalog of Netflix video in 2013 amounted to about 3.14 petabytes of storage space (interesting read <a href="https://www.quora.com/What-things-in-the-world-have-a-pebibyte-of-storage-space-in-them">on Quora</a>). Second, unlike Amazon’s other hosted database product, Amazon RDS, Redshift stores data according to column-based structure. Column orientation is good for tables containing columns with lots of repeated values (i.e. Credit Card Names, County/State, Product Type, etc, like <a href="http://www.salesforce.com">CRM</a> data. The benefit of column data is that because it’s uniform, there are opportunities for storage size optimization via compression. You can read more about how to maximize compression <a href="https://en.wikipedia.org/wiki/Column-oriented_DBMS#Compression">here</a>.</p>

<p style="max-width: 400px; margin: auto;">
	<img src="https://kejserbi.files.wordpress.com/2012/07/image4.png" alt="Column orientation compression" />
</p>

<p>Redshift handles large scale column-oriented datasets using massive parallel processing, performing coordinated computations across a large number of processors in parallel, making it a fast and powerful data warehouse option.</p>

<h3 id="data-warehouse-setup-in-the-data-age">Data Warehouse Setup in the Data Age</h3>

<p>Even just a few years ago, getting a data warehouse and proper ETL processes in place was a long, painful and probably very expensive ordeal. But we’ve arrived in the data age where easy-to-use, affordable data solutions are bountiful.</p>

<p>At <a href="https://www.yhat.com/">Yhat</a>, we use a Redshift to warehouse everything–CRM data (we use SFDC), product data, site metrics from Google Analytics, and data from a bunch of other data. It took us about 20 mins to set up the database on AWS, and it took us…wait for it…another 20 mins or so to set up all of our ETL using <a href="http://fivetran.com/">Fivetran</a> which we couldn’t be more impressed with.</p>

<h3 id="sql-ide-done-right">SQL IDE Done Right</h3>

<p>Most SQL IDEs of yesteryear leave something to be desired in terms of UX. The majority are clunky and have super old school frankenstein UIs. Why they all focus on making exploring the DB schema rather than on making it easy to write queries, view results and think critically about your data has always been a mystery.</p>

<p>Well those days are also over. Wagon is the query-focused SQL app I’ve been looking for for years. Wagon boasts a clean UX designed analysts. Features are carefully chosen with a keen eye for usability for people writing tens or hundreds of queries per day. Wagon gets it in spades.</p>

<h3 id="overview-of-python-udfs-in-redshift">Overview of Python UDFs in Redshift</h3>

<p>UDF stands for user-defined function, meaning that you can add functions to an environment (in this case, Redshift) in addition to those that come built in. Python UDFs allow you combine the power of Redshift with what you know and love about the Python programming language without switching between IDEs or systems.</p>

<p>The great thing about UDFs in Redshift is that Redshift will automatically execute it using its MPP architecture. One caveat to keep in mind is that your Python code still won’t execute as quickly as native SQL functions (<code>AVG</code>, <code>MIN</code>, <code>MAX</code>, etc.) that are baked into the database.</p>

<h3 id="how-to-use-udfs">How to Use UDFs</h3>

<p>You can certainly work with text in pure SQL, but some tasks are just easier to do in a scripting language like Python instead. Here’s a toy example to illustrate how to use Python functionality within Redshift using a UDF.</p>

<p>Suppose a column in one of our tables contains huge chunks of text or html, and we’re interested to find any email addresses within any one record. Let’s write a function that will take in raw text and return a pipe <code>|</code> separated string containing any email addresses found within the input text document. Define the function like so:</p>

<script src="https://gist.github.com/elisebreda/e5ea2dcb43bc896c3ab0.js"></script>

<p>Once defined, you can use it like this:</p>

<script src="https://gist.github.com/elisebreda/6286e4497a96bfa122b7.js"></script>

<p>This is a scalar function, so it’ll return one record for each input row (i.e. not an aggregate function). One thing to remember is that your UDFs are per-database, meaning that if you have multiple in your Redshift cluster, you’ll need to define your functions in each database.</p>

<h3 id="example">Example</h3>

<p>Redshift Python UDFs are based on Python 2.7 and come preloaded with a lot of our favorite libraries, including NumPy, SciPy and Pandas. You can also import custom modules from S3 and the web.</p>

<p>Here’s the template published on the AWS blog that you can use to start creating your own scalar functions:</p>

<script src="https://gist.github.com/elisebreda/471b18eb6e87c4fa3b3f.js"></script>

<p>The scalar UDFs that you create will return a single result value for each input value. Once you’ve defined a UDF, you can use it in any SQL statement. One thing to remember is that your UDFs are per-database, meaning that if you have multiple in your Redshift cluster, you’ll need to define your functions in each database.</p>

<h3 id="helpful-resources">Helpful Resources</h3>

<p>To learn more about Python UDFs in Redshift, check out Amazon’s <a href="http://docs.aws.amazon.com/redshift/latest/dg/user-defined-functions.html">documentation</a>, which is super helpful and covers everything from constraints to security and python support. You can also check out the <a href="https://aws.amazon.com/blogs/aws/user-defined-functions-for-amazon-redshift/">initial release blogpost</a> and a more <a href="http://blogs.aws.amazon.com/bigdata/post/Tx1IHV1G67CY53T/Introduction-to-Python-UDFs-in-Amazon-Redshift">extensive post</a> that uses UDFs to analyze the CMS Open Payments data set.</p>

<h3 id="yhat">Yhat</h3>
<p>Yhat’s flagship product, <a href="https://www.yhat.com/products/sciencecluster">ScienceOps</a>, empowers teams of data scientists deploy their models into web and mobile applications. These models are embedded into production applications via REST APIs without any recoding from their native statistical language.</p>

        </div>
      </section>
     
     
     <!-- jobs are on the last blog page, so cut it off one page short -->
     
       <div class="clearfix paging">
           
           <p class="pull-left">
             <a href="/blog/page/2/" class="next">← Older Posts</a>
           </p>
           
           
         </div>
       </div>
     </div>
    </div>
  </div>
</div>


    <nav class="navbar navbar-default navbar-static-bottom" role="navigation">
      <div class="container">
        <p class="navbar-text navbar-right">&copy; 2016 Wagon Analytics, Inc.</p>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-left">
            <li><a href="mailto:hello@wagonhq.com">Email</a></li>
          <li><a href="https://twitter.com/WagonHQ" target="_blank">Twitter</a></li>
          <li><a href="/privacy">Privacy Policy</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <link rel="stylesheet" href="/css/github-gist.css">
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.min.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>
